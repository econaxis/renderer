cmake_minimum_required(VERSION 3.16)
set(SFML_STATIC_LIBRARIES TRUE)
IF (CMAKE_BUILD_TYPE MATCHES RelWithDebInfo OR CMAKE_BUILD_TYPE MATCHES Release OR TRUE)
    set(SFML_DIR ${CMAKE_SOURCE_DIR}/extern/sfml/build/Release/lib/cmake/SFML)
    target_compile_options(game PRIVATE -fopenmp)
    target_link_options(game PRIVATE -fopenmp -O3)
    # target_compile_options(game PRIVATE /O2 /Qpar /Qpar-report:1)
    #    target_link_options(game PRIVATE /PROFILE)
    message("building for release mode")
ELSE ()
    target_compile_options(game PRIVATE -Og)
    set(SFML_DIR ${CMAKE_SOURCE_DIR}/extern/sfml/build/Debug/lib/cmake/SFML)
endif ()
if (NOT EMSCRIPTEN)
    find_package(SFML 2.5.1 COMPONENTS graphics system REQUIRED)
endif ()

if (SFML_FOUND)
    message("sfml found")
    set_property(GLOBAL PROPERTY sfml_found TRUE)
    set_target_properties(sfml-graphics PROPERTIES IMPORTED_GLOBAL TRUE)
    add_library(sfml-alias-target ALIAS sfml-graphics)
else ()
    message("sfml not found")
    set_property(GLOBAL PROPERTY sfml_found FALSE)
endif ()
